
[#scenario-search]
=== Scenario: Full-text search for data in legacy database

b) *Full-text search of legacy data:* enables full-text search for legacy data by adopting data integration through event streaming and processing. All changes to the legacy database tracked tables, including the operations create, updated and delete, should be reflected in the search index tool. The indexing tool will then store and index data in a way that supports fast searches.

.Architecture Diagram: Search Solution Context. A representation of the solution for the new search functionality.
[link=_images/02/arch-search-overview.png, window="_blank"]
image::02/arch-search-overview.png[width=100%]

Similarly to the behavior of the cashback scenario, here Debezium is tracking changes in the retail database. All changes to product data is streamed to Kafka. The `elastic-connector` service reacts to product events and synchronizes it within ElasticSearch product index. 

For demonstration purposes, the `search-service` holds a sample UI to allow searching data in the indexing tool.  

The following services are part of this scenario:

* *Retail database*: stores all information from the legacy application. It includes information about *products*, *customers* and new *sales* (detailed through *line items*).The tables in this database are tracked by Debezium.
* *Debezium*: tracks all events that happens in tables from retail db (public.customer,public.sale,public.line_item,public.product) and streams changes into Kafka streams;
* *Elastic connector service*: an event-driven microservice that reacts to products' events and push relevant updates to Elastic. This service capabilities were developed with with Camel and Quarkus.
* *Search service*: a sample quarkus service that integrates with ElasticSearch using the https://quarkus.io/guides/elasticsearch[quarkus elastic-rest-client extension], and exposes a REST endpoint for searching products by name and description. For demonstration purposes, this service has a page to facilitate visualizing the search results.

.Seach Service: a Quarkus client that integrates with Elastic for easier search results visualization.
[link=_images/02/search-ui.png, window="_blank"]
image::02/search-ui.png[width=100%]



